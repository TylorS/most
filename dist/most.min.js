!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.most=t.most||{})}(this,function(t){"use strict";function e(t){this.source=t}function n(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}function i(t,e){this._dispose=t,this._data=e}function o(){this.disposable=void 0,this.disposed=!1,this._resolve=void 0;var t=this;this.result=new Promise(function(e){t._resolve=e})}function s(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}function u(t,e,n){var r=a(e);return s(r)?r.catch(function(e){n.error(t,e)}):r}function h(t,e){return l(new i(t,e))}function c(){return new i(Hr,(void 0))}function p(t){return h(f,t)}function f(t){return Promise.all(Gr(a,t))}function a(t){try{return t.dispose()}catch(t){return Promise.reject(t)}}function d(){return new o}function l(t){return new i(y,v(t))}function y(t){return t.disposed||(t.disposed=!0,t.value=a(t.disposable),t.disposable=void 0),t.value}function v(t){return{disposed:!1,disposable:t,value:void 0}}function w(t){setTimeout(function(){throw t},0)}function k(t,e,n){this._run=t,this.value=e,this.sink=n,this.active=!0}function m(t,e,n){n.error(t,e)}function _(t,e,n){n.event(t,e)}function b(t,e,n){n.end(t,e)}function g(t){return new e(new x(t))}function x(t){this.value=t}function E(t,e,n){n.event(t,e),n.end(t,void 0)}function A(){return Jr}function M(){}function P(t){return t.dispose()}function T(){return Kr}function I(){}function R(t){return new e(new j(t))}function j(t){this.array=t}function L(t,e,n){function r(t){n.end(t)}for(var i=0,o=e.length;i<o&&this.active;++i)n.event(t,e[i]);this.active&&r(t)}function C(t){return"function"==typeof t[Qr]}function W(t){return t[Qr]()}function N(t){return new e(new S(t))}function S(t){this.iterable=t}function q(t,e,n){this.scheduler=n,this.iterator=t,this.task=new k(B,this,e),n.asap(this.task)}function B(t,e,n){var r=e.iterator.next();r.done?n.end(t,r.value):n.event(t,r.value),e.scheduler.asap(e.task)}function O(t){var e=null;if(t){var n=t[ri];if("function"==typeof n&&(e=n.call(t),!e||"function"!=typeof e.subscribe))throw new TypeError("invalid observable "+e)}return e}function V(t){return new e(new z(t))}function z(t){this.observable=t}function D(t,e){this.sink=t,this.scheduler=e}function U(t){return t.unsubscribe()}function F(t){if(t instanceof e)return t;var n=O(t);if(null!=n)return V(n);if(Array.isArray(t)||Br(t))return R(t);if(C(t))return N(t);throw new TypeError("from(x) must be observable, iterable, or array-like: "+t)}function G(t,n){return new e(new H(t,n))}function H(t,e){this.period=t,this.value=e}function J(t,e,n,r){this.time=t,this.period=e,this.task=n,this.scheduler=r,this.active=!0}function K(t){return Promise.resolve(t).then(Q)}function Q(t){try{return t.run()}catch(e){return t.error(e)}}function X(){this.tasks=[]}function Y(t,e,n){for(var r=e.events,i=0;i<r.length;++i){var o=r[i];o.active&&(t(o),o.period>=0&&o.active&&(o.time=o.time+o.period,Z(o,n)))}return n}function Z(t,e){var n=e.length;if(0===n)return void e.push(et(t.time,[t]));var r=tt(t.time,e);r>=n?e.push(et(t.time,[t])):t.time===e[r].time?e[r].events.push(t):e.splice(r,0,et(t.time,[t]))}function $(t,e){e.events=Sr(t,e.events)}function tt(t,e){for(var n,r,i=0,o=e.length;i<o;){if(n=Math.floor((i+o)/2),r=e[n],t===r.time)return n;t<r.time?o=n:i=n+1}return o}function et(t,e){return{time:t,events:e}}function nt(t,e){this.timer=t,this.timeline=e,this._timer=null,this._nextArrival=1/0;var n=this;this._runReadyTasksBound=function(){n._runReadyTasks(n.now())}}function rt(){}function it(t){this.f=t,this.active=!0}function ot(t){var e=new it(t);return K(e),e}function st(t,e){if(null==t||"object"!=typeof t)throw new TypeError("subscriber must be an object");var n=d(),r=new ut(w,t,n);return n.setDisposable(e.source.run(r,ii)),new ht(n)}function ut(t,e,n){this.fatalError=t,this.subscriber=e,this.disposable=n}function ht(t){this.disposable=t}function ct(t,e,n,r,i,o){Promise.resolve(i.dispose()).then(function(){"function"==typeof n&&n.call(e,o)}).catch(function(t){"function"==typeof r&&r.call(e,t)}).catch(t)}function pt(t,e){return t(e)}function ft(t,e,n){try{n.event(t,e)}catch(e){n.error(t,e)}}function at(t,e,n){try{n.end(t,e)}catch(e){n.error(t,e)}}function dt(t,e,n){this.event=t,this.source=e,this.capture=n}function lt(t){var e=t.target;e.source.removeEventListener(e.event,t.addEvent,e.capture)}function yt(t){this.sink=t,this.events=[],this.active=!0}function vt(t,e,n){this.sink=t,this.events=n,this.time=e}function wt(t,e,n){this.time=t,this.value=e,this.sink=n}function kt(t,e,n){this.time=t,this.value=e,this.sink=n}function mt(t,e){this.event=t,this.source=e}function _t(t){var e=t.target;e.source.removeListener(e.event,t.addEvent)}function bt(t,n,r){var i;if("function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener)arguments.length<3&&(r=!1),i=new dt(t,n,r);else{if("function"!=typeof n.addListener||"function"!=typeof n.removeListener)throw new Error("source must support addEventListener/removeEventListener or addListener/removeListener");i=new mt(t,n)}return new e(i)}function gt(t){return xt(t,ii)}function xt(t,e){return new Promise(function(n,r){Et(t,e,n,r)})}function Et(t,e,n,r){var i=d(),o=new At(n,r,i);i.setDisposable(t.run(o,e))}function At(t,e,n){this._end=t,this._error=e,this._disposable=n,this.active=!0}function Mt(t,e,n,r){Promise.resolve(n.dispose()).then(function(){t(r)},e)}function Pt(t){this.sink=t}function Tt(t,e){this.p=t,this.source=e}function It(t,e){this.p=t,this.sink=e}function Rt(t,e){return function(n){return t(n)&&e(n)}}function jt(t,e,n){this.p=t,this.f=e,this.source=n}function Lt(t,e,n){this.p=t,this.f=e,this.sink=n}function Ct(t,e){this.f=t,this.source=e}function Wt(t,e){this.f=t,this.sink=e}function Nt(t,n){return new e(Ct.create(t,n.source))}function St(t,e){return Nt(function(){return t},e)}function qt(t,n){return new e(new Bt(t,n.source))}function Bt(t,e){this.source=e,this.f=t}function Ot(t,e){this.sink=e,this.f=t}function Vt(t,e){return zt(qt(t,e))}function zt(t){return gt(t.source)}function Dt(t,n,r){return new e(new Ut(t,n,r.source))}function Ut(t,e,n){this.step=t,this.seed=e,this.source=n}function Ft(t,e,n){this.step=t,this.seed=e,this.sink=n}function Gt(t,n,r){return new e(new Ht(t,n,r.source))}function Ht(t,e,n){this.source=n,this.f=t,this.value=e}function Jt(t,e,n){this.f=t,this.value=e,this.sink=n}function Kt(t,e,n){return gt(new Qt(t,e,n.source))}function Qt(t,e,n){this.source=n,this.f=t,this.value=e}function Xt(t,e,n){this.f=t,this.value=e,this.sink=n}function Yt(t,n){return new e(new Zt(t,n))}function Zt(t,e){this.f=t,this.value=e}function $t(t,e,n,r){function i(t){s.sink.error(s.scheduler.now(),t)}function o(t){return te(t,e)}this.f=t,this.sink=n,this.scheduler=r,this.active=!0;var s=this;Promise.resolve(this).then(o).catch(i)}function te(t,e){var n=t.f;return Promise.resolve(n(e)).then(function(e){return ee(t,e)})}function ee(t,e){return e.done?(t.sink.end(t.scheduler.now(),e.value),e.value):(t.sink.event(t.scheduler.now(),e.value),t.active?te(t,e.seed):e.value)}function ne(t,n){return new e(new re(t,n))}function re(t,e){this.f=t,this.value=e}function ie(t,e,n,r){function i(t){u.sink.error(u.scheduler.now(),t)}function o(t){return oe(t,s)}this.f=t,this.sink=n,this.scheduler=r,this.active=!0;var s=e,u=this;Promise.resolve(this).then(o).catch(i)}function oe(t,e){if(t.sink.event(t.scheduler.now(),e),!t.active)return e;var n=t.f;return Promise.resolve(n(e)).then(function(e){return se(t,e)})}function se(t,e){return t.active?oe(t,e):t.value}function ue(t){return new e(new he(t,Rr(arguments)))}function he(t,e){this.f=t,this.args=e}function ce(t,e,n){function r(t){i.sink.error(i.scheduler.now(),t)}this.iterator=t,this.sink=e,this.scheduler=n,this.active=!0;var i=this;Promise.resolve(this).then(pe).catch(r)}function pe(t,e){return t.active?fe(t,t.iterator.next(e)):e}function fe(t,e){return e.done?t.sink.end(t.scheduler.now(),e.value):Promise.resolve(e.value).then(function(e){return ae(t,e)},function(e){return de(t,e)})}function ae(t,e){return t.sink.event(t.scheduler.now(),e),pe(t,e)}function de(t,e){return fe(t,t.iterator.throw(e))}function le(t,n){return new e(new ye(t,n.source))}function ye(t,e){this.f=t,this.source=e}function ve(t,e,n,r){this.f=t,this.sink=n,this.scheduler=r,this.active=!0,this.disposable=l(e.run(this,r))}function we(t,e){return ke(g(t),e)}function ke(t,e){return le(function(){return e},t)}function me(t,e){this.sink=e,this.index=t,this.active=!0,this.value=void 0}function _e(t,e){switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3]);case 5:return t(e[0],e[1],e[2],e[3],e[4]);default:return t.apply(void 0,e)}}function be(t){return ge(t,si(arguments))}function ge(t,n){var r=n.length;return 0===r?A():1===r?Nt(t,n[0]):new e(xe(t,n))}function xe(t,e){return new Ae(t,oi(Ee,e))}function Ee(t){return t.source}function Ae(t,e){this.f=t,this.sources=e}function Me(t,e,n,r){var i=this;this.sink=n,this.disposables=t,this.sinks=e,this.f=r;var o=e.length;this.awaiting=o,this.values=new Array(o),this.hasValue=new Array(o);for(var s=0;s<o;++s)i.hasValue[s]=!1;this.activeCount=e.length}function Pe(t,e){return be(zr,t,e)}function Te(t,n){return new e(new Ie(t,n.source))}function Ie(t,e){this.transducer=t,this.source=e}function Re(t,e){this.xf=t,this.sink=e}function je(t){this.time=-(1/0),this.sink=t}function Le(t){return"function"==typeof t["@@transducer/step"]?new Ce(t):new We(t)}function Ce(t){this.tx=t}function We(t){this.tx=t}function Ne(){this.head=null,this.length=0}function Se(t,e){return qe(Or,t,e)}function qe(t,n,r){return new e(new Be(t,n,r.source))}function Be(t,e,n){this.f=t,this.concurrency=e,this.source=n}function Oe(t,e,n,r,i){this.f=t,this.concurrency=e,this.sink=r,this.scheduler=i,this.pending=[],this.current=new Ne,this.disposable=l(n.run(this,i)),this.active=!0}function Ve(t,e,n,r){return t(e).source.run(n,r)}function ze(t,e,n){this.prev=this.next=null,this.time=t,this.outer=e,this.sink=n,this.disposable=void 0}function De(t,e){return qe(t,1/0,e)}function Ue(t){return Se(1/0,t)}function Fe(t,e){return qe(t,1,e)}function Ge(){return He(ui(arguments))}function He(t){var n=t.length;return 0===n?A():1===n?t[0]:new e(Je(t))}function Je(t){return new Qe(hi(Ke,[],t))}function Ke(t,e){var n=e.source;return n instanceof Qe?t.concat(n.sources):t.concat(n)}function Qe(t){this.sources=t}function Xe(t,e,n){this.sink=n,this.disposables=t,this.activeCount=e.length}function Ye(t,e){return $e(t,e,Ir(2,arguments))}function Ze(t,n){return new e(new en(Or,t.source,[n.source]))}function $e(t,n,r){return new e(new en(t,n.source,Lr(tn,r)))}function tn(t){return t.source}function en(t,e,n){this.f=t,this.sampler=e,this.sources=n}function nn(t){this.sink=t,this.hasValue=!1}function rn(t,e,n){this.f=t,this.sinks=e,this.sink=n,this.active=!1}function on(t){return t.hasValue}function sn(t){return t.value}function un(t){this._capacity=t||32,this._length=0,this._head=0}function hn(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function cn(t){return pn(t,pi(arguments))}function pn(t,n){return 0===n.length?A():1===n.length?Nt(t,n[0]):new e(new an(t,ci(fn,n)))}function fn(t){return t.source}function an(t,e){this.f=t,this.sources=e}function dn(t,e,n,r){this.f=t,this.sinks=n,this.sink=r,this.buffers=e}function ln(t,e,n,r){r.event(e,_e(t,ci(yn,n)))}function yn(t){return t.shift()}function vn(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n].isEmpty()&&!e[n].active)return!0;return!1}function wn(t){for(var e=0,n=t.length;e<n;++e)if(t[e].isEmpty())return!1;return!0}function kn(t){return new e(new mn(t.source))}function mn(t){this.source=t}function _n(t,e){this.sink=t,this.scheduler=e,this.current=null,this.ended=!1}function bn(t,e,n,r){this.min=t,this.max=e,this.outer=n,this.sink=r,this.disposable=c()}function gn(t,n){return new e(Tt.create(t,n.source))}function xn(t){return En(Pn,t)}function En(t,n){return new e(new An(t,n.source))}function An(t,e){this.equals=t,this.source=e}function Mn(t,e){this.equals=t,this.sink=e,this.value=void 0,this.init=!0}function Pn(t,e){return t===e}function Tn(t,e){return Rn(0,t,e)}function In(t,e){return Rn(t,1/0,e)}function Rn(t,n,r){return n<=t?A():new e(jn(t,n,r.source))}function jn(t,e,n){return n instanceof Ct?Ln(t,e,n):n instanceof Wn?Cn(t,e,n):new Wn(t,e,n)}function Ln(t,e,n){return Ct.create(n.f,jn(t,e,n.source))}function Cn(t,e,n){return t+=n.min,e=Math.min(e+n.min,n.max),new Wn(t,e,n.source)}function Wn(t,e,n){this.source=n,this.min=t,this.max=e}function Nn(t,e,n,r,i){this.sink=r,this.skip=t,this.take=e,this.disposable=l(n.run(this,i))}function Sn(t,n){return new e(new qn(t,n.source))}function qn(t,e){this.p=t,this.source=e}function Bn(t,e,n,r){this.p=t,this.sink=n,this.active=!0,this.disposable=l(e.run(this,r))}function On(t,n){return new e(new Vn(t,n.source))}function Vn(t,e){this.p=t,this.source=e}function zn(t,e){this.p=t,this.sink=e,this.skipping=!0}function Dn(t,n){return new e(new Gn(t.source,n.source))}function Un(t,n){return new e(new Hn(t.source,n.source))}function Fn(t,e){return Dn(Ue(t),Un(t,e))}function Gn(t,e){this.maxSignal=t,this.source=e}function Hn(t,e){this.minSignal=t,this.source=e}function Jn(t,e){this.value=t,this.sink=e}function Kn(t,e,n){this.min=t,this.max=e,this.sink=n}function Qn(t,e,n){this.value=1/0,this.sink=e,this.disposable=t.run(this,n)}function Xn(t,e,n){this.value=1/0,this.sink=e,this.disposable=t.run(this,n)}function Yn(){}function Zn(t,n){return t<=0?n:new e(new $n(t,n.source))}function $n(t,e){this.dt=t,this.source=e}function tr(t,e,n){this.dt=t,this.sink=e,this.scheduler=n}function er(t){return new e(new nr(t.source))}function nr(t){this.source=t}function rr(t){this.sink=t}function ir(t,n){return new e(or(t,n.source))}function or(t,e){return e instanceof Ct?sr(t,e):e instanceof hr?ur(t,e):new hr(t,e)}function sr(t,e){return Ct.create(e.f,or(t,e.source))}function ur(t,e){return new hr(Math.max(t,e.period),e.source)}function hr(t,e){this.period=t,this.source=e}function cr(t,e){this.time=0,this.period=t,this.sink=e}function pr(t,n){return new e(new fr(t,n.source))}function fr(t,e){this.dt=t,this.source=e}function ar(t,e,n,r){this.dt=t,this.sink=n,this.scheduler=r,this.value=void 0,this.timer=null;var i=e.run(this,r);this.disposable=p([this,i])}function dr(t){return lr(g(t))}function lr(t){return new e(new yr(t.source))}function yr(t){this.source=t}function vr(t,e){this.sink=t,this.scheduler=e,this.queue=Promise.resolve();var n=this;this._eventBound=function(t){n.sink.event(n.scheduler.now(),t)},this._endBound=function(t){n.sink.end(n.scheduler.now(),t)},this._errorBound=function(t){n.sink.error(n.scheduler.now(),t)}}function wr(t){this.sink=t,this.active=!0}function kr(t,n){return new e(new gr(t,n.source))}function mr(t){return new e(new _r(t))}function _r(t){this.value=t}function br(t,e,n){n.error(t,e)}function gr(t,e){this.f=t,this.source=e}function xr(t,e,n,r){this.f=t,this.sink=new wr(n),this.scheduler=r,this.disposable=e.run(this,r)}var Er="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ar=r(function(t,e){!function(t,n){if("function"==typeof define&&define.amd)define("@most/prelude",["exports"],n);else if("undefined"!=typeof e)n(e);else{var r={exports:{}};n(r.exports),t.mostPrelude=r.exports}}(Er,function(t){function e(t,e){var n=e.length,r=new Array(n+1);r[0]=t;for(var i=0;i<n;++i)r[i+1]=e[i];return r}function n(t,e){for(var n=e.length,r=new Array(n+1),i=0;i<n;++i)r[i]=e[i];return r[n]=t,r}function r(t,e){if(t<0)throw new TypeError("n must be >= 0");var n=e.length;return 0===t||0===n?e:t>=n?[]:i(t,e,n-t)}function i(t,e,n){for(var r=new Array(n),i=0;i<n;++i)r[i]=e[t+i];return r}function o(t){return r(1,t)}function s(t){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function u(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=t(e[i]);return r}function h(t,e,n){for(var r=e,i=0,o=n.length;i<o;++i)r=t(r,n[i],i);return r}function c(t,e,n){if(e<0)throw new TypeError("i must be >= 0");for(var r=n.length,i=new Array(r),o=0;o<r;++o)i[o]=e===o?t:n[o];return i}function p(t,e){if(t<0)throw new TypeError("i must be >= 0");var n=e.length;return 0===n||t>=n?e:1===n?[]:f(t,e,n-1)}function f(t,e,n){var r=new Array(n),i=void 0;for(i=0;i<t;++i)r[i]=e[i];for(i=t;i<n;++i)r[i]=e[i+1];return r}function a(t,e){for(var n,r=e.length,i=new Array(r),o=0,s=0;s<r;++s)n=e[s],t(n)||(i[o]=n,++o);return i.length=o,i}function d(t,e){for(var n=0,r=e.length;n<r;++n)if(t===e[n])return n;return-1}function l(t){return null!=t&&"number"==typeof t.length&&"function"!=typeof t}function y(t){function e(n,r){switch(arguments.length){case 0:return e;case 1:return function(e){return t(n,e)};default:return t(n,r)}}return e}function v(t){function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return y(function(e,r){return t(n,e,r)});case 2:return function(e){return t(n,r,e)};default:return t(n,r,i)}}return e}Object.defineProperty(t,"__esModule",{value:!0});var w=function(t){return t},k=function(t,e){return function(n){return t(e(n))}},m=function(t,e){return t(e)};t.cons=e,t.append=n,t.drop=r,t.tail=o,t.copy=s,t.map=u,t.reduce=h,t.replace=c,t.remove=p,t.removeAll=a,t.findIndex=d,t.isArrayLike=l,t.id=w,t.compose=k,t.apply=m,t.curry2=y,t.curry3=v})}),Mr=n(Ar),Pr=Ar.cons,Tr=Ar.append,Ir=Ar.drop,Rr=Ar.tail,jr=Ar.copy,Lr=Ar.map,Cr=Ar.reduce,Wr=Ar.replace,Nr=Ar.remove,Sr=Ar.removeAll,qr=Ar.findIndex,Br=Ar.isArrayLike,Or=Ar.id,Vr=Ar.compose,zr=Ar.apply,Dr=Ar.curry2,Ur=Ar.curry3,Fr=Object.freeze({default:Mr,cons:Pr,append:Tr,drop:Ir,tail:Rr,copy:jr,map:Lr,reduce:Cr,replace:Wr,remove:Nr,removeAll:Sr,findIndex:qr,isArrayLike:Br,id:Or,compose:Vr,apply:zr,curry2:Dr,curry3:Ur});i.prototype.dispose=function(){return this._dispose(this._data)},o.prototype.setDisposable=function(t){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=t,this.disposed&&this._resolve(t.dispose())},o.prototype.dispose=function(){return this.disposed?this.result:(this.disposed=!0,void 0!==this.disposable&&(this.result=this.disposable.dispose()),this.result)};var Gr=Lr,Hr=Or;k.event=function(t,e){return new k(_,t,e)},k.end=function(t,e){return new k(b,t,e)},k.error=function(t,e){return new k(m,t,e)},k.prototype.dispose=function(){this.active=!1},k.prototype.run=function(t){this.active&&this._run(t,this.value,this.sink)},k.prototype.error=function(t,e){return this.active?void this.sink.error(t,e):w(e)},x.prototype.run=function(t,e){return e.asap(new k(E,this.value,t))},M.prototype.run=function(t,e){var n=k.end(void 0,t);return e.asap(n),h(P,n)};var Jr=new e(new M);I.prototype.run=function(){return c()};var Kr=new e(new I);j.prototype.run=function(t,e){return e.asap(new k(L,this.array,t))};var Qr;Qr="function"==typeof Set&&"function"==typeof(new Set)["@@iterator"]?"@@iterator":"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_",S.prototype.run=function(t,e){return new q(W(this.iterable),t,e)},q.prototype.dispose=function(){return this.task.dispose()};var Xr=r(function(t,e){function n(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n}),Yr=n(Xr),Zr=Object.freeze({default:Yr}),$r=r(function(t,e){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(Zr),o=r(i),s=void 0;"undefined"!=typeof Er?s=Er:"undefined"!=typeof window&&(s=window);var u=(0,o.default)(s);e.default=u}),ti=n($r),ei=Object.freeze({default:ti}),ni=r(function(t){t.exports=n(ei)}),ri=n(ni);z.prototype.run=function(t,e){var n=this.observable.subscribe(new D(t,e));if("function"==typeof n)return h(n);if(n&&"function"==typeof n.unsubscribe)return h(U,n);throw new TypeError("Observable returned invalid subscription "+String(n))},D.prototype.next=function(t){this.sink.event(this.scheduler.now(),t)},D.prototype.complete=function(t){this.sink.end(this.scheduler.now(),t)},D.prototype.error=function(t){this.sink.error(this.scheduler.now(),t)},H.prototype.run=function(t,e){return e.periodic(this.period,k.event(this.value,t))},J.prototype.run=function(){return this.task.run(this.time)},J.prototype.error=function(t){return this.task.error(this.time,t)},J.prototype.dispose=function(){return this.scheduler.cancel(this),this.task.dispose()},X.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},X.prototype.isEmpty=function(){return 0===this.tasks.length},X.prototype.add=function(t){Z(t,this.tasks)},X.prototype.remove=function(t){var e=tt(t.time,this.tasks);if(e>=0&&e<this.tasks.length){var n=qr(t,this.tasks[e].events);if(n>=0)return this.tasks[e].events.splice(n,1),!0}return!1},X.prototype.removeAll=function(t){for(var e=this,n=0,r=this.tasks.length;n<r;++n)$(t,e.tasks[n])},X.prototype.runTasks=function(t,e){for(var n=this,r=this.tasks,i=r.length,o=0;o<i&&r[o].time<=t;)++o;this.tasks=r.slice(o);for(var s=0;s<o;++s)n.tasks=Y(e,r[s],n.tasks)},nt.prototype.now=function(){return this.timer.now()},nt.prototype.asap=function(t){return this.schedule(0,-1,t)},nt.prototype.delay=function(t,e){return this.schedule(t,-1,e)},nt.prototype.periodic=function(t,e){return this.schedule(0,t,e)},nt.prototype.schedule=function(t,e,n){var r=this.now(),i=new J(r+Math.max(0,t),e,n,this);return this.timeline.add(i),this._scheduleNextRun(r),i},nt.prototype.cancel=function(t){t.active=!1,this.timeline.remove(t)&&this._reschedule()},nt.prototype.cancelAll=function(t){this.timeline.removeAll(t),this._reschedule()},nt.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.now())},nt.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},nt.prototype._scheduleNextRun=function(t){if(!this.timeline.isEmpty()){var e=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(e,t):e<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(e,t))}},nt.prototype._scheduleNextArrival=function(t,e){this._nextArrival=t;var n=Math.max(0,t-e);this._timer=this.timer.setTimer(this._runReadyTasksBound,n)},nt.prototype._runReadyTasks=function(t){this._timer=null,this.timeline.runTasks(t,Q),this._scheduleNextRun(this.now())},rt.prototype.now=Date.now,rt.prototype.setTimer=function(t,e){return e<=0?ot(t):setTimeout(t,e)},rt.prototype.clearTimer=function(t){return t instanceof it?t.cancel():clearTimeout(t)},it.prototype.run=function(){return this.active&&this.f()},it.prototype.error=function(t){throw t},it.prototype.cancel=function(){this.active=!1};var ii=new nt(new rt,new X);ut.prototype.event=function(t,e){"function"==typeof this.subscriber.next&&this.subscriber.next(e)},ut.prototype.end=function(t,e){var n=this.subscriber;ct(this.fatalError,n,n.complete,n.error,this.disposable,e)},ut.prototype.error=function(t,e){var n=this.subscriber;ct(this.fatalError,n,n.error,n.error,this.disposable,e)},ht.prototype.unsubscribe=function(){this.disposable.dispose()},dt.prototype.run=function(t,e){function n(n){ft(e.now(),n,t)}return this.source.addEventListener(this.event,n,this.capture),h(lt,{target:this,addEvent:n})},yt.prototype.event=function(t,e){this.active&&(0===this.events.length&&K(new vt(this.sink,t,this.events)),this.events.push({time:t,value:e}))},yt.prototype.end=function(t,e){this.active&&this._end(new wt(t,e,this.sink))},yt.prototype.error=function(t,e){this._end(new kt(t,e,this.sink))},yt.prototype._end=function(t){this.active=!1,K(t)},vt.prototype.run=function(){for(var t,e=this,n=this.events,r=this.sink,i=0,o=n.length;i<o;++i)t=n[i],e.time=t.time,r.event(t.time,t.value);n.length=0},vt.prototype.error=function(t){this.sink.error(this.time,t)},wt.prototype.run=function(){this.sink.end(this.time,this.value)},wt.prototype.error=function(t){this.sink.error(this.time,t)},kt.prototype.run=function(){this.sink.error(this.time,this.value)},kt.prototype.error=function(t){throw t},mt.prototype.run=function(t,e){function n(t){var n=arguments,i=arguments.length;if(i>1){for(var o=new Array(i),s=0;s<i;++s)o[s]=n[s];ft(e.now(),o,r)}else ft(e.now(),t,r)}var r=new yt(t);return this.source.addListener(this.event,n),h(_t,{target:this,addEvent:n})},At.prototype.event=function(t,e){},At.prototype.end=function(t,e){this.active&&(this.active=!1,Mt(this._end,this._error,this._disposable,e))},At.prototype.error=function(t,e){this.active=!1,Mt(this._error,this._error,this._disposable,e)},Pt.prototype.event=function(t,e){return this.sink.event(t,e)},Pt.prototype.end=function(t,e){return this.sink.end(t,e)},Pt.prototype.error=function(t,e){return this.sink.error(t,e)},Tt.create=function(t,e){return e instanceof Tt?new Tt(Rt(e.p,t),e.source):new Tt(t,e)},Tt.prototype.run=function(t,e){return this.source.run(new It(this.p,t),e)},It.prototype.end=Pt.prototype.end,It.prototype.error=Pt.prototype.error,It.prototype.event=function(t,e){var n=this.p;n(e)&&this.sink.event(t,e)},jt.prototype.run=function(t,e){return this.source.run(new Lt(this.p,this.f,t),e)},Lt.prototype.event=function(t,e){var n=this.f,r=this.p;r(e)&&this.sink.event(t,n(e))},Lt.prototype.end=Pt.prototype.end,Lt.prototype.error=Pt.prototype.error,Ct.create=function(t,e){return e instanceof Ct?new Ct(Vr(t,e.f),e.source):e instanceof Tt?new jt(e.p,t,e.source):new Ct(t,e)},Ct.prototype.run=function(t,e){return this.source.run(new Wt(this.f,t),e)},Wt.prototype.end=Pt.prototype.end,Wt.prototype.error=Pt.prototype.error,Wt.prototype.event=function(t,e){var n=this.f;this.sink.event(t,n(e))},Bt.prototype.run=function(t,e){return this.source.run(new Ot(this.f,t),e)},Ot.prototype.end=Pt.prototype.end,Ot.prototype.error=Pt.prototype.error,Ot.prototype.event=function(t,e){var n=this.f;n(e),this.sink.event(t,e)},Ut.prototype.run=function(t,e){return this.source.run(new Ft(this.step,this.seed,t),e)},Ft.prototype.error=Pt.prototype.error,Ft.prototype.event=function(t,e){var n=this.step(this.seed,e);this.seed=n.seed,this.sink.event(t,n.value)},Ft.prototype.end=function(t){this.sink.end(t,this.seed)},Ht.prototype.run=function(t,e){var n=e.asap(k.event(this.value,t)),r=this.source.run(new Jt(this.f,this.value,t),e);return p([n,r])},Jt.prototype.event=function(t,e){var n=this.f;this.value=n(this.value,e),this.sink.event(t,this.value)},Jt.prototype.error=Pt.prototype.error,Jt.prototype.end=Pt.prototype.end,Qt.prototype.run=function(t,e){return this.source.run(new Xt(this.f,this.value,t),e)},Xt.prototype.event=function(t,e){var n=this.f;this.value=n(this.value,e),this.sink.event(t,this.value)},Xt.prototype.error=Pt.prototype.error,Xt.prototype.end=function(t){this.sink.end(t,this.value)},Zt.prototype.run=function(t,e){return new $t(this.f,this.value,t,e)},$t.prototype.dispose=function(){this.active=!1},re.prototype.run=function(t,e){return new ie(this.f,this.value,t,e)},ie.prototype.dispose=function(){this.active=!1},he.prototype.run=function(t,e){return new ce(this.f.apply(void 0,this.args),t,e)},ce.prototype.dispose=function(){this.active=!1},ye.prototype.run=function(t,e){return new ve(this.f,this.source,t,e)},ve.prototype.error=Pt.prototype.error,ve.prototype.event=function(t,e){this.active&&this.sink.event(t,e)},ve.prototype.end=function(t,e){this.active&&(u(t,this.disposable,this.sink),this._startNext(t,e,this.sink))},ve.prototype._startNext=function(t,e,n){try{this.disposable=this._continue(this.f,e,n)}catch(e){n.error(t,e)}},ve.prototype._continue=function(t,e,n){return t(e).source.run(n,this.scheduler)},ve.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()},me.prototype.event=function(t,e){this.active&&(this.value=e,this.sink.event(t,this))},me.prototype.end=function(t,e){this.active&&(this.active=!1,this.sink.end(t,{index:this.index,value:e}))},me.prototype.error=Pt.prototype.error;var oi=Lr,si=Rr;Ae.prototype.run=function(t,e){for(var n,r=this,i=this.sources.length,o=new Array(i),s=new Array(i),u=new Me(o,s,t,this.f),h=0;h<i;++h)n=s[h]=new me(h,u),o[h]=r.sources[h].run(n,e);return p(o)},Me.prototype.error=Pt.prototype.error,Me.prototype.event=function(t,e){var n=e.index,r=this._updateReady(n);this.values[n]=e.value,0===r&&this.sink.event(t,_e(this.f,this.values))},Me.prototype._updateReady=function(t){return this.awaiting>0&&(this.hasValue[t]||(this.hasValue[t]=!0,this.awaiting-=1)),this.awaiting},Me.prototype.end=function(t,e){u(t,this.disposables[e.index],this.sink),0===--this.activeCount&&this.sink.end(t,e.value)},Ie.prototype.run=function(t,e){var n=this.transducer(new je(t));return this.source.run(new Re(Le(n),t),e)},Re.prototype.event=function(t,e){var n=this.xf.step(t,e);return this.xf.isReduced(n)?this.sink.end(t,this.xf.getResult(n)):n},Re.prototype.end=function(t,e){return this.xf.result(e)},Re.prototype.error=function(t,e){return this.sink.error(t,e)},je.prototype["@@transducer/init"]=je.prototype.init=function(){},je.prototype["@@transducer/step"]=je.prototype.step=function(t,e){return isNaN(t)||(this.time=Math.max(t,this.time)),this.sink.event(this.time,e)},je.prototype["@@transducer/result"]=je.prototype.result=function(t){return this.sink.end(this.time,t)},Ce.prototype.step=function(t,e){return this.tx["@@transducer/step"](t,e)},Ce.prototype.result=function(t){return this.tx["@@transducer/result"](t)},Ce.prototype.isReduced=function(t){return null!=t&&t["@@transducer/reduced"]},Ce.prototype.getResult=function(t){return t["@@transducer/value"]},We.prototype.step=function(t,e){return this.tx.step(t,e)},We.prototype.result=function(t){return this.tx.result(t)},We.prototype.isReduced=function(t){return null!=t&&t.__transducers_reduced__},We.prototype.getResult=function(t){return t.value},Ne.prototype.add=function(t){null!==this.head&&(this.head.prev=t,t.next=this.head),this.head=t,++this.length},Ne.prototype.remove=function(t){--this.length,t===this.head&&(this.head=this.head.next),null!==t.next&&(t.next.prev=t.prev,t.next=null),null!==t.prev&&(t.prev.next=t.next,t.prev=null)},Ne.prototype.isEmpty=function(){return 0===this.length},Ne.prototype.dispose=function(){if(this.isEmpty())return Promise.resolve();var t=[],e=this.head;for(this.head=null,this.length=0;null!==e;)t.push(e.dispose()),e=e.next;return Promise.all(t)},Be.prototype.run=function(t,e){return new Oe(this.f,this.concurrency,this.source,t,e)},Oe.prototype.event=function(t,e){this._addInner(t,e)},Oe.prototype._addInner=function(t,e){this.current.length<this.concurrency?this._startInner(t,e):this.pending.push(e)},Oe.prototype._startInner=function(t,e){try{this._initInner(t,e)}catch(e){this.error(t,e)}},Oe.prototype._initInner=function(t,e){var n=new ze(t,this,this.sink);n.disposable=Ve(this.f,e,n,this.scheduler),this.current.add(n)},Oe.prototype.end=function(t,e){this.active=!1,u(t,this.disposable,this.sink),this._checkEnd(t,e)},Oe.prototype.error=function(t,e){this.active=!1,this.sink.error(t,e)},Oe.prototype.dispose=function(){return this.active=!1,this.pending.length=0,Promise.all([this.disposable.dispose(),this.current.dispose()])},Oe.prototype._endInner=function(t,e,n){this.current.remove(n),u(t,n,this),0===this.pending.length?this._checkEnd(t,e):this._startInner(t,this.pending.shift())},Oe.prototype._checkEnd=function(t,e){!this.active&&this.current.isEmpty()&&this.sink.end(t,e)},ze.prototype.event=function(t,e){this.sink.event(Math.max(t,this.time),e)},ze.prototype.end=function(t,e){this.outer._endInner(Math.max(t,this.time),e,this)},ze.prototype.error=function(t,e){this.outer.error(Math.max(t,this.time),e)},ze.prototype.dispose=function(){return this.disposable.dispose()};var ui=jr,hi=Cr;Qe.prototype.run=function(t,e){for(var n,r=this,i=this.sources.length,o=new Array(i),s=new Array(i),u=new Xe(o,s,t),h=0;h<i;++h)n=s[h]=new me(h,u),o[h]=r.sources[h].run(n,e);return p(o)},Xe.prototype.error=Pt.prototype.error,Xe.prototype.event=function(t,e){this.sink.event(t,e.value);
},Xe.prototype.end=function(t,e){u(t,this.disposables[e.index],this.sink),0===--this.activeCount&&this.sink.end(t,e.value)},en.prototype.run=function(t,e){for(var n,r=this,i=this.sources.length,o=new Array(i+1),s=new Array(i),u=new rn(this.f,s,t),h=0;h<i;++h)n=s[h]=new nn(u),o[h]=r.sources[h].run(n,e);return o[h]=this.sampler.run(u,e),p(o)},nn.prototype.event=function(t,e){this.value=e,this.hasValue=!0,this.sink._notify(this)},nn.prototype.end=function(){},nn.prototype.error=Pt.prototype.error,rn.prototype._notify=function(){this.active||(this.active=this.sinks.every(on))},rn.prototype.event=function(t){this.active&&this.sink.event(t,_e(this.f,Lr(sn,this.sinks)))},rn.prototype.end=Pt.prototype.end,rn.prototype.error=Pt.prototype.error,un.prototype.push=function(t){var e=this._length;this._checkCapacity(e+1);var n=this._head+e&this._capacity-1;this[n]=t,this._length=e+1},un.prototype.shift=function(){var t=this._head,e=this[t];return this[t]=void 0,this._head=t+1&this._capacity-1,this._length--,e},un.prototype.isEmpty=function(){return 0===this._length},un.prototype.length=function(){return this._length},un.prototype._checkCapacity=function(t){this._capacity<t&&this._ensureCapacity(this._capacity<<1)},un.prototype._ensureCapacity=function(t){var e=this._capacity;this._capacity=t;var n=this._head+this._length;n>e&&hn(this,0,this,e,n&e-1)};var ci=Lr,pi=Rr;an.prototype.run=function(t,e){for(var n,r=this,i=this.sources.length,o=new Array(i),s=new Array(i),u=new Array(i),h=new dn(this.f,u,s,t),c=0;c<i;++c)u[c]=new un,n=s[c]=new me(c,h),o[c]=r.sources[c].run(n,e);return p(o)},dn.prototype.event=function(t,e){var n=this.buffers,r=n[e.index];if(r.push(e.value),1===r.length()){if(!wn(this.buffers))return;ln(this.f,t,n,this.sink),vn(this.buffers,this.sinks)&&this.sink.end(t,void 0)}},dn.prototype.end=function(t,e){var n=this.buffers[e.index];n.isEmpty()&&this.sink.end(t,e.value)},dn.prototype.error=Pt.prototype.error,mn.prototype.run=function(t,e){var n=new _n(t,e);return p(n,this.source.run(n,e))},_n.prototype.event=function(t,e){this._disposeCurrent(t),this.current=new bn(t,1/0,this,this.sink),this.current.disposable=e.source.run(this.current,this.scheduler)},_n.prototype.end=function(t,e){this.ended=!0,this._checkEnd(t,e)},_n.prototype.error=function(t,e){this.ended=!0,this.sink.error(t,e)},_n.prototype.dispose=function(){return this._disposeCurrent(0)},_n.prototype._disposeCurrent=function(t){if(null!==this.current)return this.current._dispose(t)},_n.prototype._disposeInner=function(t,e){e._dispose(t),e===this.current&&(this.current=null)},_n.prototype._checkEnd=function(t,e){this.ended&&null===this.current&&this.sink.end(t,e)},_n.prototype._endInner=function(t,e,n){this._disposeInner(t,n),this._checkEnd(t,e)},_n.prototype._errorInner=function(t,e,n){this._disposeInner(t,n),this.sink.error(t,e)},bn.prototype.event=function(t,e){t<this.max&&this.sink.event(Math.max(t,this.min),e)},bn.prototype.end=function(t,e){this.outer._endInner(Math.max(t,this.min),e,this)},bn.prototype.error=function(t,e){this.outer._errorInner(Math.max(t,this.min),e,this)},bn.prototype._dispose=function(t){this.max=t,u(t,this.disposable,this.sink)},An.prototype.run=function(t,e){return this.source.run(new Mn(this.equals,t),e)},Mn.prototype.end=Pt.prototype.end,Mn.prototype.error=Pt.prototype.error,Mn.prototype.event=function(t,e){this.init?(this.init=!1,this.value=e,this.sink.event(t,e)):this.equals(this.value,e)||(this.value=e,this.sink.event(t,e))},Wn.prototype.run=function(t,e){return new Nn(this.min,this.max-this.min,this.source,t,e)},Nn.prototype.end=Pt.prototype.end,Nn.prototype.error=Pt.prototype.error,Nn.prototype.event=function(t,e){return this.skip>0?void(this.skip-=1):void(0!==this.take&&(this.take-=1,this.sink.event(t,e),0===this.take&&(this.dispose(),this.sink.end(t,e))))},Nn.prototype.dispose=function(){return this.disposable.dispose()},qn.prototype.run=function(t,e){return new Bn(this.p,this.source,t,e)},Bn.prototype.end=Pt.prototype.end,Bn.prototype.error=Pt.prototype.error,Bn.prototype.event=function(t,e){if(this.active){var n=this.p;this.active=n(e),this.active?this.sink.event(t,e):(this.dispose(),this.sink.end(t,e))}},Bn.prototype.dispose=function(){return this.disposable.dispose()},Vn.prototype.run=function(t,e){return this.source.run(new zn(this.p,t),e)},zn.prototype.end=Pt.prototype.end,zn.prototype.error=Pt.prototype.error,zn.prototype.event=function(t,e){if(this.skipping){var n=this.p;if(this.skipping=n(e),this.skipping)return}this.sink.event(t,e)},Gn.prototype.run=function(t,e){var n=new Jn((-(1/0)),t),r=new Xn(this.maxSignal,t,e),i=this.source.run(new Kn(n,r,t),e);return p([n,r,i])},Hn.prototype.run=function(t,e){var n=new Qn(this.minSignal,t,e),r=new Jn(1/0,t),i=this.source.run(new Kn(n,r,t),e);return p([n,r,i])},Jn.prototype.error=Pt.prototype.error,Jn.prototype.event=Yn,Jn.prototype.end=Yn,Jn.prototype.dispose=Yn,Kn.prototype.event=function(t,e){t>=this.min.value&&t<this.max.value&&this.sink.event(t,e)},Kn.prototype.error=Pt.prototype.error,Kn.prototype.end=Pt.prototype.end,Qn.prototype.event=function(t){t<this.value&&(this.value=t)},Qn.prototype.end=Yn,Qn.prototype.error=Pt.prototype.error,Qn.prototype.dispose=function(){return this.disposable.dispose()},Xn.prototype.event=function(t,e){t<this.value&&(this.value=t,this.sink.end(t,e))},Xn.prototype.end=Yn,Xn.prototype.error=Pt.prototype.error,Xn.prototype.dispose=function(){return this.disposable.dispose()},$n.prototype.run=function(t,e){var n=new tr(this.dt,t,e);return p([n,this.source.run(n,e)])},tr.prototype.dispose=function(){var t=this;this.scheduler.cancelAll(function(e){return e.sink===t.sink})},tr.prototype.event=function(t,e){this.scheduler.delay(this.dt,k.event(e,this.sink))},tr.prototype.end=function(t,e){this.scheduler.delay(this.dt,k.end(e,this.sink))},tr.prototype.error=Pt.prototype.error,nr.prototype.run=function(t,e){return this.source.run(new rr(t),e)},rr.prototype.end=Pt.prototype.end,rr.prototype.error=Pt.prototype.error,rr.prototype.event=function(t,e){this.sink.event(t,{time:t,value:e})},hr.prototype.run=function(t,e){return this.source.run(new cr(this.period,t),e)},cr.prototype.event=function(t,e){t>=this.time&&(this.time=t+this.period,this.sink.event(t,e))},cr.prototype.end=Pt.prototype.end,cr.prototype.error=Pt.prototype.error,fr.prototype.run=function(t,e){return new ar(this.dt,this.source,t,e)},ar.prototype.event=function(t,e){this._clearTimer(),this.value=e,this.timer=this.scheduler.delay(this.dt,k.event(e,this.sink))},ar.prototype.end=function(t,e){this._clearTimer()&&(this.sink.event(t,this.value),this.value=void 0),this.sink.end(t,e)},ar.prototype.error=function(t,e){this._clearTimer(),this.sink.error(t,e)},ar.prototype.dispose=function(){this._clearTimer()},ar.prototype._clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},yr.prototype.run=function(t,e){return this.source.run(new vr(t,e),e)},vr.prototype.event=function(t,e){var n=this;this.queue=this.queue.then(function(){return n._event(e)}).catch(this._errorBound)},vr.prototype.end=function(t,e){var n=this;this.queue=this.queue.then(function(){return n._end(e)}).catch(this._errorBound)},vr.prototype.error=function(t,e){var n=this;this.queue=this.queue.then(function(){return n._errorBound(e)}).catch(w)},vr.prototype._event=function(t){return t.then(this._eventBound)},vr.prototype._end=function(t){return Promise.resolve(t).then(this._endBound)},wr.prototype.event=function(t,e){this.active&&this.sink.event(t,e)},wr.prototype.end=function(t,e){this.active&&(this.disable(),this.sink.end(t,e))},wr.prototype.error=function(t,e){this.disable(),this.sink.error(t,e)},wr.prototype.disable=function(){return this.active=!1,this.sink};var fi=kr;_r.prototype.run=function(t,e){return e.asap(new k(br,this.value,t))},gr.prototype.run=function(t,e){return new xr(this.f,this.source,t,e)},xr.prototype.event=function(t,e){ft(t,e,this.sink)},xr.prototype.end=function(t,e){at(t,e,this.sink)},xr.prototype.error=function(t,e){var n=this.sink.disable();u(t,this.disposable,this.sink),this._startNext(t,e,n)},xr.prototype._startNext=function(t,e,n){try{this.disposable=this._continue(this.f,e,n)}catch(e){n.error(t,e)}},xr.prototype._continue=function(t,e,n){var r=t(e);return r.source.run(n,this.scheduler)},xr.prototype.dispose=function(){return this.disposable.dispose()};var ai=r(function(t,e){!function(t,r){if("function"==typeof define&&define.amd)define("@most/multicast",["exports","@most/prelude"],r);else if("undefined"!=typeof e)r(e,n(Fr));else{var i={exports:{}};r(i.exports,t.prelude),t.mostMulticast=i.exports}}(Er,function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n){try{n.event(t,e)}catch(e){n.error(t,e)}}function i(t,e,n){try{n.end(t,e)}catch(e){n.error(t,e)}}function o(t){var e=t.source;return e instanceof p?t:new t.constructor(new p(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.MulticastSource=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(e,r){n(this,t),this.source=e,this.sink=r,this.disposed=!1}return s(t,[{key:"dispose",value:function(){if(!this.disposed){this.disposed=!0;var t=this.source.remove(this.sink);return 0===t&&this.source._dispose()}}}]),t}(),h=function(t){return t.dispose()},c={dispose:function(){}},p=function(){function t(e){n(this,t),this.source=e,this.sinks=[],this._disposable=c}return s(t,[{key:"run",value:function(t,e){var n=this.add(t);return 1===n&&(this._disposable=this.source.run(this,e)),new u(this,t)}},{key:"_dispose",value:function(){var t=this._disposable;return this._disposable=c,Promise.resolve(t).then(h)}},{key:"add",value:function(t){return this.sinks=(0,e.append)(t,this.sinks),this.sinks.length}},{key:"remove",value:function(t){var n=(0,e.findIndex)(t,this.sinks);return n>=0&&(this.sinks=(0,e.remove)(n,this.sinks)),this.sinks.length}},{key:"event",value:function(t,e){var n=this.sinks;if(1===n.length)return n[0].event(t,e);for(var i=0;i<n.length;++i)r(t,e,n[i])}},{key:"end",value:function(t,e){for(var n=this.sinks,r=0;r<n.length;++r)i(t,e,n[r])}},{key:"error",value:function(t,e){for(var n=this.sinks,r=0;r<n.length;++r)n[r].error(t,e)}}]),t}();t.MulticastSource=p,t.default=o})}),di=n(ai);e.of=g,e.empty=A,e.prototype.subscribe=function(t){return st(t,this)},e.prototype[ri]=function(){return this},e.prototype.thru=function(t){return pt(t,this)},e.prototype.observe=e.prototype.forEach=function(t){return Vt(t,this)},e.prototype.drain=function(){return zt(this)},e.prototype.loop=function(t,e){return Dt(t,e,this)},e.prototype.scan=function(t,e){return Gt(t,e,this)},e.prototype.reduce=function(t,e){return Kt(t,e,this)},e.prototype.concat=function(t){return ke(this,t)},e.prototype.startWith=function(t){return we(t,this)},e.prototype.map=function(t){return Nt(t,this)},e.prototype.ap=function(t){return Pe(this,t)},e.prototype.constant=function(t){return St(t,this)},e.prototype.tap=function(t){return qt(t,this)},e.prototype.transduce=function(t){return Te(t,this)},e.prototype.flatMap=e.prototype.chain=function(t){return De(t,this)},e.prototype.join=function(){return Ue(this)},e.prototype.continueWith=e.prototype.flatMapEnd=function(t){return le(t,this)},e.prototype.concatMap=function(t){return Fe(t,this)},e.prototype.mergeConcurrently=function(t){return Se(t,this)},e.prototype.merge=function(){return He(Pr(this,arguments))},e.prototype.combine=function(t){return ge(t,Wr(this,0,arguments))},e.prototype.sampleWith=function(t){return Ze(t,this)},e.prototype.sample=function(t){return sampleArray(t,this,Rr(arguments))},e.prototype.zip=function(t){return pn(t,Wr(this,0,arguments))},e.prototype.switch=e.prototype.switchLatest=function(){return kn(this)},e.prototype.filter=function(t){return gn(t,this)},e.prototype.skipRepeats=function(){return xn(this)},e.prototype.skipRepeatsWith=function(t){return En(t,this)},e.prototype.take=function(t){return Tn(t,this)},e.prototype.skip=function(t){return In(t,this)},e.prototype.slice=function(t,e){return Rn(t,e,this)},e.prototype.takeWhile=function(t){return Sn(t,this)},e.prototype.skipWhile=function(t){return On(t,this)},e.prototype.until=e.prototype.takeUntil=function(t){return Dn(t,this)},e.prototype.since=e.prototype.skipUntil=function(t){return Un(t,this)},e.prototype.during=function(t){return Fn(t,this)},e.prototype.delay=function(t){return Zn(t,this)},e.prototype.timestamp=function(){return er(this)},e.prototype.throttle=function(t){return ir(t,this)},e.prototype.debounce=function(t){return pr(t,this)},e.prototype.await=function(){return lr(this)},e.prototype.recoverWith=e.prototype.flatMapError=function(t){return fi(t,this)},e.prototype.multicast=function(){return di(this)},t.Stream=e,t.of=g,t.just=g,t.empty=A,t.never=T,t.from=F,t.periodic=G,t.observe=Vt,t.forEach=Vt,t.drain=zt,t.loop=Dt,t.scan=Gt,t.reduce=Kt,t.concat=ke,t.startWith=we,t.map=Nt,t.constant=St,t.tap=qt,t.ap=Pe,t.transduce=Te,t.flatMap=De,t.chain=De,t.join=Ue,t.continueWith=le,t.flatMapEnd=le,t.concatMap=Fe,t.mergeConcurrently=Se,t.merge=Ge,t.mergeArray=He,t.combine=be,t.combineArray=ge,t.sample=Ye,t.sampleWith=Ze,t.zip=cn,t.zipArray=pn,t.switchLatest=kn,t.switch=kn,t.filter=gn,t.skipRepeats=xn,t.distinct=xn,t.skipRepeatsWith=En,t.distinctBy=En,t.take=Tn,t.skip=In,t.slice=Rn,t.takeWhile=Sn,t.skipWhile=On,t.takeUntil=Dn,t.until=Dn,t.skipUntil=Un,t.since=Un,t.during=Fn,t.delay=Zn,t.timestamp=er,t.throttle=ir,t.debounce=pr,t.fromPromise=dr,t.awaitPromises=lr,t.await=lr,t.recoverWith=kr,t.flatMapError=fi,t.throwError=mr,t.multicast=di,t.fromEvent=bt,t.unfold=Yt,t.iterate=ne,t.generate=ue,Object.defineProperty(t,"__esModule",{value:!0})});